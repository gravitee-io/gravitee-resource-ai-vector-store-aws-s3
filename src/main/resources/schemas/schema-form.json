{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "AI Vector Store AWS S3 Vectors Configuration",
  "type": "object",
  "properties": {
    "properties": {
      "type": "object",
      "title": "Vector Store Settings",
      "description": "Defines the vector search behavior, similarity function, eviction strategy, and performance-related settings.",
      "properties": {
        "embeddingSize": {
          "type": "integer",
          "title": "Embedding Size",
          "description": "Dimension of the embedding vectors. This must match the dimensionality used by the model generating embeddings.",
          "minimum": 1,
          "default": 384
        },
        "maxResults": {
          "type": "integer",
          "title": "Max Results",
          "description": "Maximum number of results returned in a vector search query.",
          "minimum": 1,
          "default": 5
        },
        "similarity": {
          "type": "string",
          "title": "Similarity Function",
          "description": "The distance metric used to compare embedding vectors. COSINE measures the cosine of the angle between vectors. Best for normalized vectors and when direction matters more than magnitude.  EUCLIDEAN measures the straight-line distance between vectors. Best when both direction and magnitude are important.",
          "enum": [
            "COSINE",
            "EUCLIDEAN"
          ],
          "default": "COSINE"
        },
        "threshold": {
          "type": "number",
          "title": "Threshold",
          "description": "Minimum similarity score for a result to be considered relevant. For COSINE, this ranges from 0 (least similar) to 1 (most similar). For EUCLIDEAN, lower is more similar.",
          "default": "0.7"
        },
        "readOnly": {
          "type": "boolean",
          "title": "Read-only",
          "description": "If true, disables writes and enables read-only access to the index.",
          "default": true
        },
        "allowEviction": {
          "type": "boolean",
          "title": "Allow Eviction",
          "description": "Enable automatic eviction of old or unused entries from the vector store when readOnly is false.",
          "default": false,
          "gioConfig": {
            "displayIf": {
              "$eq": {
                "value.properties.readOnly": false
              }
            }
          }
        },
        "evictTime": {
          "type": "integer",
          "title": "Eviction Time",
          "description": "Duration after which an unused vector entry can be evicted.",
          "minimum": 1,
          "default": 1,
          "gioConfig": {
            "displayIf": {
              "$eq": {
                "value.properties.allowEviction": true
              }
            }
          }
        },
        "evictTimeUnit": {
          "type": "string",
          "title": "Eviction Time Unit",
          "description": "Unit of time used for eviction duration. Defines how long unused vectors are retained.",
          "enum": [
            "MINUTES",
            "HOURS",
            "DAYS"
          ],
          "default": "HOURS",
          "gioConfig": {
            "displayIf": {
              "$eq": {
                "value.properties.allowEviction": true
              }
            }
          }
        }
      },
      "required": [
        "embeddingSize",
        "maxResults",
        "similarity",
        "threshold",
        "readOnly"
      ]
    },
    "s3VectorsConfig": {
      "type": "object",
      "title": "AWS S3 Vectors Configuration",
      "description": "Connection and index settings for AWS S3 Vectors.",
      "properties": {
        "vectorBucketName": {
          "type": "string",
          "title": "S3 Vector Bucket Name",
          "description": "S3 vector bucket name (3â€“63 lowercase, numbers, hyphens)."
        },
        "vectorIndexName": {
          "type": "string",
          "title": "Vector Index Name",
          "description": "Index name within the bucket; immutable after creation."
        },
        "resourceContextKey": {
            "type": "string",
            "title": "Resource Context Key",
            "description": "Optional key for resource context, used for multi-tenant isolation.",
            "default": null
        },
        "encryption": {
          "type": "string",
          "title": "Encryption",
          "description": "S3 server-side encryption type.",
          "enum": ["SSE_S3", "SSE_KMS", "NONE"],
          "default": "SSE_S3"
        },
        "kmsKeyId": {
          "type": ["string", "null"],
          "title": "KMS Key ARN",
          "description": "ARN of the KMS key if using SSE_KMS.",
          "default": null
        },
        "region": {
          "type": "string",
          "title": "AWS Region",
          "description": "AWS region where the bucket/index exist."
        },
        "awsAccessKeyId": {
          "type": "string",
          "title": "AWS Access Key ID",
          "description": "AWS access key ID for authentication."
        },
        "awsSecretAccessKey": {
          "type": "string",
          "title": "AWS Secret Access Key",
          "description": "AWS secret access key for authentication.",
          "format": "password"
        },
        "sessionToken": {
          "type": ["string", "null"],
          "title": "AWS Session Token",
          "description": "AWS session token (optional).",
          "default": null
        }
      },
      "required": [
        "vectorBucketName",
        "vectorIndexName",
        "encryption",
        "region",
        "awsAccessKeyId",
        "awsSecretAccessKey"
      ]
    }
  },
  "required": [
    "properties",
    "s3VectorsConfig"
  ]
}
