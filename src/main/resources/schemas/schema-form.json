{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "AI Vector Store AWS S3 Vectors Configuration",
  "type": "object",
  "properties": {
    "properties": {
      "type": "object",
      "title": "Vector Store Settings",
      "description": "Defines the vector search behavior, similarity function, and performance-related settings.",
      "properties": {
        "embeddingSize": {
          "type": "integer",
          "title": "Embedding Size",
          "description": "Number of embedding dimensions (must match your model and index).",
          "minimum": 1,
          "default": 1024
        },
        "maxResults": {
          "type": "integer",
          "title": "Max Results",
          "description": "Number of nearest neighbor vectors to return per query.",
          "minimum": 1,
          "default": 10
        },
        "similarity": {
          "type": "string",
          "title": "Similarity Function",
          "description": "The distance metric used to compare embedding vectors. Must match the index configuration.",
          "enum": [
            "COSINE",
            "EUCLIDEAN"
          ],
          "default": "COSINE"
        },
        "threshold": {
          "type": "number",
          "title": "Threshold",
          "description": "Minimum similarity/distance score to return results.",
          "default": 0.5
        },
        "readOnly": {
          "type": "boolean",
          "title": "Read-only",
          "description": "If true, disables writes and enables read-only access to the index.",
          "default": false
        }
      },
      "required": [
        "embeddingSize",
        "maxResults",
        "similarity",
        "threshold",
        "readOnly"
      ]
    },
    "s3VectorsConfig": {
      "type": "object",
      "title": "AWS S3 Vectors Configuration",
      "description": "Connection and index settings for AWS S3 Vectors.",
      "properties": {
        "vectorBucketName": {
          "type": "string",
          "title": "S3 Vector Bucket Name",
          "description": "S3 vector bucket name (3â€“63 lowercase, numbers, hyphens)."
        },
        "vectorIndexName": {
          "type": "string",
          "title": "Vector Index Name",
          "description": "Index name within the bucket; immutable after creation."
        },
        "encryption": {
          "type": "string",
          "title": "Encryption",
          "description": "S3 server-side encryption type.",
          "enum": ["SSE-S3", "SSE-KMS"],
          "default": "SSE-S3"
        },
        "kmsKeyId": {
          "type": ["string", "null"],
          "title": "KMS Key ARN",
          "description": "ARN of the KMS key if using SSE-KMS.",
          "default": null
        },
        "distanceMetric": {
          "type": "string",
          "title": "Distance Metric",
          "description": "Distance metric for the index. Must match the similarity function.",
          "enum": ["COSINE", "EUCLIDEAN"],
          "default": "COSINE"
        },
        "region": {
          "type": "string",
          "title": "AWS Region",
          "description": "AWS region where the bucket/index exist."
        },
        "metadataSchema": {
          "type": "object",
          "title": "Metadata Schema",
          "description": "Defines which metadata keys are filterable/non-filterable.",
          "properties": {
            "filterable": {
              "type": "array",
              "title": "Filterable Metadata Keys",
              "items": { "type": "string" },
              "default": []
            },
            "nonFilterable": {
              "type": "array",
              "title": "Non-Filterable Metadata Keys",
              "items": { "type": "string" },
              "default": []
            }
          },
          "required": ["filterable", "nonFilterable"]
        },
        "awsAccessKeyId": {
          "type": "string",
          "title": "AWS Access Key ID",
          "description": "AWS access key ID for authentication."
        },
        "awsSecretAccessKey": {
          "type": "string",
          "title": "AWS Secret Access Key",
          "description": "AWS secret access key for authentication.",
          "format": "password"
        },
        "sessionToken": {
          "type": ["string", "null"],
          "title": "AWS Session Token",
          "description": "AWS session token (optional).",
          "default": null
        }
      },
      "required": [
        "vectorBucketName",
        "vectorIndexName",
        "encryption",
        "distanceMetric",
        "region",
        "metadataSchema",
        "awsAccessKeyId",
        "awsSecretAccessKey"
      ]
    }
  },
  "required": [
    "properties",
    "s3VectorsConfig"
  ]
}
